<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simple-WebGPU - Fast, Functional, Declarative, Graphics</title>
    <link
      href="./data/tailwind.min.css"
      rel="stylesheet"
    />
    <link href="./data/index.css" rel="stylesheet">
  
    <script type="module" src="./demos/index.js"></script>
    <script>
      import particles from "./particles";

import basic from "./basic";

import hexagon from "./h3-hexagon";

let defaultDemo = 'physics';
let data = {}

async function start_loop_static(options) {
  options.data = options.data || data; //extend 

  let draw = await init(options);
  if (! draw) return alert('webgpu not defined - please install chrome canary, go to chrome://flags, search for WebGPU')
  draw(data)
  
  // requestAnimationFrame(function test() {
  //   draw(data);
  //   requestAnimationFrame(test)
  // });
}

let demoTitles = [
  'basic' , 'particles', 'hexagon'
]

let demos = [
  basic, particles, hexagon
]

  document.querySelectorAll('input').forEach(e => {
   e.addEventListener('click', (event) => {
      select(event.target.value)
    })
  })

function cleanup() {
  document.querySelector(':checked').checked = null  
  let canvas = document.querySelector('canvas')
  
  if (canvas) canvas.remove()
}

function customShader(options) {
  let start = window.location.host === "localhost:3000" ? start_loop_static : start_loop_nb;
  start(options);
}

function select(name) {
  let idx = demoTitles.indexOf(name);
  let demo = demos[idx];

  cleanup()

  window.location.hash = name;

 demo()
 
}



select(window.location.hash.slice(1))

    </script>
  </head>
  <body class=" bg-gray-600">

    <div id="swap" class="mt-4">
      <form name="stuff">
        <fieldset>
      <div id="control-panel" class="mt-2">
    <!-- TODO tesselate hexagons for h3 uniform zoom level for hexagonal binning for data texture usage for 16 million complaints  -->
          <label class="inline-flex items-center">
            hexagon
            <input
            type="radio"
            class="form-radio"
            name="hexagon"
            value="hexagon"
          />
        </label>
        <label class="inline-flex items-center">
          basic
          <input
          type="radio"
          class="form-radio"
          name="basic"
          value="basic"
          checked
        />
      </label>
           <label class="inline-flex items-center">
        particles
      <input
        type="radio"
        class="form-radio"
        name="particles"
        value="particles"
        
      />
    </label>


        <!-- <label class="inline-flex items-center">
          texture
          <input
          type="radio"
          class="form-radio"
          name="texture"
          value="texture"
          
          />
      </label> -->


        <!-- <label class="inline-flex items-center">
          texture
          <input
          type="radio"
          class="form-radio"
          name="texture"
          value="texture"
          
          />
      </label> -->

    <!-- <label class="inline-flex items-center">
    postProcessing
    <input
    type="radio"
    class="form-radio"
    name="postProcessing"
    value="postProcessing"
    />
    </label> -->
          <!-- <label class="inline-flex items-center">
        line-primitives
        <input
        type="radio"
        class="form-radio"
        name="line-primitives"
        value="line-primitives"
        /> 
       </label>  
      -->

      
      </div>
    </fieldset>
      </form>
      <!-- <canvas height="500" width="100"></canvas> -->

      <div class=" text-white bg-purple-800 mt-96 m-auto">
        <h1>declarative and stateless WebGPU</h1>
        <p>
          Simple-Webgpu is a new functional abstraction for WebGPU.
          
          using simple-webgpu is easier than writing raw webGPU code because you don't need to manage state or binding. 
          it's also lighter and faster and has less overhead than many existing 3d frameworks. 
          and it has a functional data-driven style inspired by react.
          
          check out the sections below to learn more!</p>
        <a class=" font-white" href="https://github.com/shelbernstein/Simple-webgpu/blob/main/readme.md">
          Readme
        </a>
        <a href="https://github.com/shelbernstein/Simple-webgpu/blob/main/API.md">
          API
        </a>
        <a href="/https://github.com/shelbernstein/Simple-webgpu">
          GitHub
        </a>
      </div>
    </div>
   
  </body>
</html>
